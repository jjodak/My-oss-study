# 💾 Git 커밋, 로그 이력 및 과거 버전 이동 요약

---

## 1. 깃의 3가지 영역과 커밋 과정

### 1.1 깃의 3가지 영역
버전 관리를 위해 깃(Git)은 세 가지 주요 영역으로 나뉩니다.
* **작업 디렉토리 (Working Directory/Tree)**: 탐색기 상의 폴더 하부로, 실제 파일을 생성하고 수정하는 공간입니다.
* **스테이징 영역 (Staging Area/Index)**: 커밋할 변경 사항을 준비하는 임시 공간입니다. 저장소의 `.git` 폴더 내 `index` 파일에 해당 정보가 저장됩니다.
* **깃 저장소 (Git Repository)**: 버전 이력(커밋)이 최종적으로 기록되는 곳입니다. 저장소의 `.git` 폴더 내 여러 정보에 저장됩니다.

### 1.2 커밋 과정 (Add와 Commit)
[cite_start]파일을 깃 저장소에 저장하려면 다음 단계를 거쳐야 합니다. [cite: 1171, 1213-1217, 1330]

| 명령어 | 역할 | 파일 이동 흐름 | 비고 |
| :--- | :--- | :--- | :--- |
| **`$ git add <file>`** | 변경 사항을 스테이징 영역에 추가 | Working Tree → Staging Area (복사) | 파일이 처음 만들어지면 **Untracked file** 상태입니다. |
| **`$ git commit`** | 스테이징된 변경 사항을 저장소에 기록 | Staging Area → Git Repository (버전 관리) | 스냅샷을 찍는 명령입니다. |

* [cite_start]**커밋 메시지**: 커밋에는 이력을 관리하기 위해 반드시 커밋 메시지의 저장이 필요합니다. [cite: 1332]
    * [cite_start]**`$ git commit -m 'message'`**: 커밋 메시지를 직접 입력합니다. [cite: 1334]
    * **`$ git commit -am 'message'`**: 수정된 파일(Modified file)의 경우 `add`와 `commit`을 함께 실행합니다. (단, Untracked file에는 사용 불가)[cite_start]. [cite: 1334, 1337]
* [cite_start]**Unstaging**: 스테이징된 파일을 다시 작업 디렉토리 상태로 되돌리려면 `$ git rm --cached <file>` 명령어를 사용합니다. [cite: 1301]

### 1.3 깃 상태 보기 (`$ git status`)
* [cite_start]**`$ git status`**: 깃 저장소의 현재 상태를 확인합니다. [cite: 1235]
    * [cite_start]**Untracked file**: 깃에 의해 아직 관리되지 않는 파일 (추가되지 않은 상태)을 의미하며 일반적으로 **붉은색**으로 표시됩니다. [cite: 1261, 1593, 1594]
    * [cite_start]**Changes to be committed**: 스테이징 영역에 추가된 파일이며, 커밋될 준비가 된 상태를 의미하며 일반적으로 **녹색**으로 표시됩니다. [cite: 1291, 1596, 1597]
    * [cite_start]**`nothing to commit, working tree clean`**: 3가지 영역(작업 디렉토리, 스테이징 영역, 깃 저장소)이 동일한 상태를 의미합니다. [cite: 1399, 1403]
* [cite_start]**`$ git status --short`** 또는 **`$ git status -s`**: 현재 상태를 간략하게 표시합니다. [cite: 1237]

---

## 2. 버전 로그 이력 확인 및 해석

### 2.1 커밋 로그 이력 보기 (`$ git log`)
* [cite_start]**`$ git log`**: 로그 이력 정보(커밋 ID, 작성자, 날짜, 메시지 등)를 표시하며, 기본적으로 가장 최근 커밋부터 표시합니다. [cite: 1434, 2139]
* **`$ git log --oneline`**: 로그 이력을 한 줄로 간략히 표시합니다. (커밋 ID 앞 7자리, 커밋 메시지 제목)[cite_start]. [cite: 1434, 1461, 1462]
* [cite_start]**`$ git log --patch`** 또는 **`$ git log -p`**: 로그 이력과 함께 **파일의 변화** (이전 커밋과의 차이)를 표시합니다. [cite: 1434, 1476]
* [cite_start]**`$ git log --graph`**: 문자 그림으로 로그 이력을 그립니다. [cite: 2144]
* [cite_start]**`$ git log -n`**: 최근 $n$개의 로그 이력만 표시합니다. [cite: 2144]

### 2.2 로그 결과의 이해
* **커밋 ID**: 모든 커밋을 구분하기 위한 고유 번호입니다. [cite_start]**SHA-1** (Secure Hash Algorithm 1) 해시 함수를 사용하여 40개의 16진수(160비트)로 표현됩니다. [cite: 1448, 1449, 1450]
* [cite_start]**파일 변화 해석 (Patch)**: `$ git log --patch` 결과에서 파일의 차이(diff)를 확인할 수 있습니다. [cite: 1476, 1486]
    * [cite_start]**`--- a/file` / `+++ b/file`**: 이전 파일(a)과 이후 파일(b)을 비교합니다. [cite: 1521, 1523]
    * [cite_start]**`+content`**: 새로운 내용을 의미합니다. [cite: 1536]
    * [cite_start]**`/dev/null`**: 첫 커밋의 경우 이전 파일이 없음을 의미합니다. [cite: 1478, 1520]

### 2.3 특정 커밋 정보 확인 (`$ git show`)
* [cite_start]**`$ git show`**: 인자가 없으면 **마지막 커밋(HEAD)**의 커밋 정보와 이전 버전과의 파일 차이(diff)를 표시합니다. [cite: 1546, 1552, 1553]
* [cite_start]**`$ git show [commitID]`** 또는 **`$ git show HEAD~`**: 지정한 커밋 ID나 참조 위치의 커밋 정보를 표시합니다. [cite: 1546]
* [cite_start]**`$ git show --oneline -s`**: 한 줄로 표시하며, 파일 차이는 표시되지 않습니다. [cite: 1546]

---

## 3. 버전 이력 참조 및 과거로의 이동 (시간 여행)

### 3.1 상대적 커밋 참조
[cite_start]커밋 ID를 직접 사용하지 않고 현재 위치(HEAD)를 기준으로 이전 커밋을 참조할 수 있습니다. [cite: 2163, 2260, 2271]

| 참조 표현 | 의미 | 예시 |
| :--- | :--- | :--- |
| **`HEAD`** | **현재 브랜치의 가장 최근 커밋** | `$ git show HEAD` (최신 커밋 정보) |
| **`HEAD~`** 또는 **`HEAD^`** | 바로 **이전** 커밋 | `$ git checkout HEAD~` |
| **`HEAD~n`** | $n$번째 **이전** 커밋 | `$ git checkout HEAD~2` (2번째 이전 커밋) |
| **`HEAD~~`** 또는 **`HEAD^^`** | 2번째 **이전** 커밋 | `$ git checkout HEAD~~` |

### 3.2 과거 버전으로 이동 (`$ git checkout`)
[cite_start]특정 과거 시점의 커밋으로 작업 환경을 이동할 수 있습니다. [cite: 2093, 2324]

* **`$ git checkout [이전커밋]`** (예: `$ git checkout HEAD~`)
    * [cite_start]HEAD 이전 커밋으로 이동하며, 이 상태에서 당시의 파일 내용을 확인할 수 있습니다. [cite: 2325, 2327]
    * 이동 시 **작업 디렉토리가 깨끗한 상태(clean)**여야 합니다. (`nothing to commit, working tree clean`)[cite_start]. [cite: 2336, 2616]
    * 과거 커밋으로 이동하면 **'detached HEAD' 상태**가 됩니다. [cite_start]이는 HEAD가 마지막 커밋이 아닌 그 이전을 가리킨다는 의미입니다. [cite: 2337, 2338]

### 3.3 최신 버전으로 되돌아오기
* **`$ git checkout [branch]`** (예: `$ git checkout main`)
    * [cite_start]해당 브랜치(예: `main`)의 **가장 마지막 커밋**으로 이동하여 최신 버전으로 돌아옵니다. [cite: 2327, 2441]
* **`$ git checkout -`**
    * [cite_start]직전에 `checkout` 했던 위치(커밋 또는 브랜치)로 돌아옵니다. [cite: 2327, 2391]

> [cite_start]💡 **`git switch` 명령**: `git checkout`은 파일 복원, 커밋 이동, 브랜치 이동 등 여러 기능이 혼재되어 있어, 최근에는 브랜치 전환 및 생성 기능은 `$ git switch`가, 이전 커밋으로의 이동 및 분리된 HEAD 사용은 `$ git switch -d`가 대신하는 추세입니다. [cite: 2454, 2667]