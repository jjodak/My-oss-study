# ⚙️ Git 고급 기능: Rebase, 커밋 수정 및 VS Code 활용

---

## 1. 커밋 이력 수정 (`--amend` 및 `rebase -i`)

### 1.1 최신 커밋 (HEAD) 수정 (`$ git commit --amend`)
`$ git commit --amend` 명령은 **최신 HEAD 커밋**의 메시지나 내용을 수정할 때 사용합니다. [cite_start]이는 기존 커밋을 덮어쓰고 **새로운 커밋 ID**로 변경합니다. [cite: 573, 576, 589]

| 명령 | 메시지 수정 | 내용 수정 | 비고 |
| :--- | :--- | :--- | :--- |
| **`$ git commit --amend`** | [cite_start]편집기 실행 후 메시지 수정 [cite: 572, 592] | [cite_start]새로운 파일 추가/수정 후 실행하면 내용 반영 [cite: 586, 587] | [cite_start]기본 편집기(`core.editor`)가 실행됩니다. [cite: 569] |
| **`$ git commit --amend -m 'new msg'`** | [cite_start]직접 메시지 입력 [cite: 575, 594] | [cite_start]새로운 파일 추가/수정 후 실행하면 내용 반영 [cite: 586, 587] | 메시지를 직접 입력하여 편집기 실행을 생략합니다. |
| **`$ git commit --amend --no-edit`** | 수정 안 함 | [cite_start]새로운 파일 추가/수정 후 실행하면 내용 반영 [cite: 596] | 메시지 수정 없이 내용만 반영할 때 사용합니다. |

### 1.2 이전 여러 커밋 수정 (`$ git rebase --interactive`)
[cite_start]`$ git rebase --interactive` (또는 `$ git rebase -i`) 명령은 **HEAD 이전의 여러 커밋**을 수정할 때 사용하며, 작업 공간이 깨끗한 상태(clean)여야 합니다. [cite: 716, 719]

* **명령 구조**: `$ git rebase -i HEAD~n`
    * `HEAD~n`은 수정할 커밋들의 **직전 커밋**을 지정합니다. (실제로는 `HEAD~(n-1)[cite_start]`부터 수정 가능) [cite: 719, 722]
    * [cite_start]편집기에 오래된 커밋부터 표시되며, 각 커밋 옆에 다음 대화형 명령어를 입력하여 수정합니다. [cite: 732, 733]

| 명령어 | 역할 | 설명 |
| :--- | :--- | :--- |
| **`p`** (pick) | 그대로 사용 | [cite_start]해당 커밋을 수정하지 않고 그대로 사용합니다. [cite: 738, 1005] |
| **`r`** (reword) | 메시지 수정 | [cite_start]개별 커밋 메시지를 다시 작성합니다. [cite: 739, 1006] |
| **`s`** (squash) | 커밋 합치기 | [cite_start]계속된 이후 커밋을 이전 커밋에 **결합**하여 커밋 이력을 뭉칩니다. [cite: 740, 755, 1007] |
| **`d`** (drop) | 커밋 삭제 | [cite_start]커밋 자체를 삭제합니다. [cite: 742, 1008] |

> ⚠️ `rebase`는 커밋 이력을 변경하므로 새로운 ID가 부여됩니다. [cite_start]정확한 이력을 남겨야 할 경우에는 사용하면 안 됩니다. [cite: 717, 1576, 1577]

---

## 2. 브랜치 리베이스 (`$ git rebase`)

### 2.1 `rebase`의 개념 및 목적
* [cite_start]**정의**: 브랜치의 **Base(공통 조상 커밋)**를 수정하여 재배치하는 병합 방식입니다. [cite: 1472]
* [cite_start]**목적**: `merge`와 달리 브랜치 이력을 분기 없이 **하나의 줄기로 선형적이고 깨끗하게** 이어지도록 합니다. [cite: 1476, 1575]
* **과정**:
    1. [cite_start]대상 브랜치에서 `rebase` 명령을 실행하여 base를 기준 브랜치의 최신 커밋으로 이동시킵니다. [cite: 1471, 1473]
    2. [cite_start]이후 **기준 브랜치**로 이동하여 **Fast-forward 병합**을 수행해 최종 통합을 완료합니다. [cite: 1474]

### 2.2 `rebase`와 `merge` 비교
| 구분 | `merge` (3-way) | `rebase` |
| :--- | :--- | :--- |
| **이력 형태** | [cite_start]여러 분기가 그대로 남아 **이력이 복잡해집니다.** [cite: 1573] | [cite_start]히스토리가 **선형적으로 단순해지고 깨끗**해집니다. [cite: 1575] |
| **원래 커밋 유지** | [cite_start]원래의 커밋 이력이 모두 그대로 유지됩니다. [cite: 1573] | [cite_start]원래의 커밋 이력이 변경되고 **새로운 ID가 부여**됩니다. [cite: 1576] |

### 2.3 `rebase`의 충돌 해결
`rebase` 도중에도 충돌이 발생할 수 있습니다. [cite_start]충돌 발생 시 다음 절차를 따릅니다. [cite: 1528, 1529]
1.  [cite_start]**파일 수정**: 충돌 파일을 직접 수정합니다. [cite: 1532]
2.  [cite_start]**파일 추가**: `$ git add <수정파일>`을 실행합니다. [cite: 1534]
3.  [cite_start]**계속 수행**: `$ git rebase --continue`를 실행하여 `rebase`를 계속 진행합니다. [cite: 1536]

---

## 3. Visual Studio Code (VS Code)의 Git 활용

### 3.1 VS Code의 Git 연동 기초
* [cite_start]**폴더 열기**: `File` 메뉴의 **`Open Folder...`**를 통해 깃 저장소 폴더를 엽니다. [cite: 10384]
* [cite_start]**저장소 초기화**: `SOURCE CONTROL` 활동바에서 **`Initialize Repository`**를 클릭하여 `.git` 저장소를 생성합니다. [cite: 10431, 10432, 10444, 10462]
* **파일 상태**:
    * [cite_start]**`Changes`** (Working Directory): 작업 디렉토리의 변경 사항을 표시합니다. [cite: 10535, 10708]
    * [cite_start]**`Staged Changes`** (Staging Area): 스테이징 영역의 변경 사항을 표시합니다. [cite: 10537, 10706]

### 3.2 VS Code에서 Git 명령 수행
VS Code의 `SOURCE CONTROL` 활동바는 Git CLI 명령과 동일한 기능을 GUI로 제공합니다.

| 작업 | CLI 명령 | VS Code GUI 기능 |
| :--- | :--- | :--- |
| **Add** | `$ git add <file>` | `Changes` 항목 위 '+' 아이콘 또는 파일을 `Staged Changes`로 드래그 |
| **Commit** | `$ git commit -m 'msg'` | [cite_start]커밋 메시지 입력 후 **`✓ Commit`** 버튼 클릭 [cite: 10568, 10569] |
| **Restore WD** | `$ git restore <file>` | [cite_start]`Changes` 항목에서 **`Discard Changes`** (현재의 Index 파일로 수정) [cite: 10625, 10799] |
| **Unstage** | `$ git restore --staged <file>` | [cite_start]`Staged Changes` 항목에서 **`Unstage Changes`** (현재의 HEAD 파일로 수정/복원) [cite: 10626, 10833]

### 3.3 로그 및 파일 비교 기능
* [cite_start]**로그 확인**: **`Git Graph`** 확장 프로그램(Extension)을 설치하면 로그 이력을 시각적인 그래프로 쉽게 살펴볼 수 있습니다. [cite: 10643, 10646, 11300]
* **파일 비교**:
    * [cite_start]**`Changes` 하부 파일 클릭**은 `$ git diff` (Index vs. Working Tree)와 동일합니다. [cite: 10968, 10969]
    * [cite_start]**`Staged Changes` 하부 파일 클릭**은 `$ git diff --staged` (HEAD vs. Index)와 동일합니다. [cite: 11110, 11111]
    * [cite_start]**`Git Graph`**의 **`Uncommitted Changes`**를 클릭하면 `$ git diff HEAD` (HEAD vs. Working Tree)와 동일하게 파일 비교를 보여줍니다. [cite: 11162]